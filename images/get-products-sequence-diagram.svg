<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="932px" preserveAspectRatio="none" style="width:1948px;height:932px;background:#FFFFFF;" version="1.1" viewBox="0 0 1948 932" width="1948px" zoomAndPan="magnify"><defs><filter height="300%" id="f14pwoq2tjzc2p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="427" x="757.25" y="28.708">Get products and track search/filter activities</text><rect fill="#ADD8E6" height="885.9922" style="stroke:#A80036;stroke-width:1.0;" width="932" x="311.5" y="40.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="717.5" y="53.02">Product Service</text><rect fill="#DDDDDD" height="885.9922" style="stroke:#A80036;stroke-width:1.0;" width="626" x="1314.5" y="40.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="188" x="1533.5" y="53.02">Tracking Activity Service</text><rect fill="#FFFFFF" filter="url(#f14pwoq2tjzc2p)" height="206.7344" style="stroke:#000000;stroke-width:2.0;" width="1019.5" x="10" y="416.4453"/><rect fill="#FFFFFF" height="73.0703" style="stroke:none;stroke-width:1.0;" width="1019.5" x="10" y="550.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="38" x2="38" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="38" x2="38" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="38" x2="38" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373.5" x2="373.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="373.5" x2="373.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373.5" x2="373.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="537" x2="537" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="537" x2="537" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="537" x2="537" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="684" x2="684" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="684" x2="684" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="684" x2="684" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="810" x2="810" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="810" x2="810" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="810" x2="810" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="947.5" x2="947.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="947.5" x2="947.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="947.5" x2="947.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1071.5" x2="1071.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1071.5" x2="1071.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1071.5" x2="1071.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1181.5" x2="1181.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1181.5" x2="1181.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1181.5" x2="1181.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1278.5" x2="1278.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1278.5" x2="1278.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1278.5" x2="1278.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1385.5" x2="1385.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1385.5" x2="1385.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1385.5" x2="1385.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1561.5" x2="1561.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1561.5" x2="1561.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1561.5" x2="1561.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1722.5" x2="1722.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1722.5" x2="1722.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1722.5" x2="1722.5" y1="714.1172" y2="840.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1860.5" x2="1860.5" y1="123.25" y2="673.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1860.5" x2="1860.5" y1="673.3125" y2="714.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1860.5" x2="1860.5" y1="714.1172" y2="840.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="119.9482">User</text><ellipse cx="38.5" cy="49.9531" fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M38.5,57.9531 L38.5,84.9531 M25.5,65.9531 L51.5,65.9531 M38.5,84.9531 L25.5,99.9531 M38.5,84.9531 L51.5,99.9531 " fill="none" filter="url(#f14pwoq2tjzc2p)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="20" y="852.6436">User</text><ellipse cx="38.5" cy="865.9453" fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M38.5,873.9453 L38.5,900.9453 M25.5,881.9453 L51.5,881.9453 M38.5,900.9453 L25.5,915.9453 M38.5,900.9453 L51.5,915.9453 " fill="none" filter="url(#f14pwoq2tjzc2p)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="112" x="315.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="322.5" y="107.9482">Middleware(s)</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="112" x="315.5" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="322.5" y="859.6436">Middleware(s)</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="143" x="464" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="471" y="107.9482">ProductController</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="143" x="464" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="471" y="859.6436">ProductController</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="123" x="621" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="628" y="107.9482">ProductService</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="123" x="621" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="628" y="859.6436">ProductService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="758" y="119.9482">ProductModel</text><ellipse cx="810.5" cy="90.9531" fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="798.5" x2="822.5" y1="104.9531" y2="104.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="758" y="852.6436">ProductModel</text><ellipse cx="810.5" cy="871.9453" fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="798.5" x2="822.5" y1="885.9453" y2="885.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="875.5" y="119.9482">Product Service Db</text><path d="M929.5,70.9531 C929.5,60.9531 947.5,60.9531 947.5,60.9531 C947.5,60.9531 965.5,60.9531 965.5,70.9531 L965.5,96.9531 C965.5,106.9531 947.5,106.9531 947.5,106.9531 C947.5,106.9531 929.5,106.9531 929.5,96.9531 L929.5,70.9531 " fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" style="stroke:#000000;stroke-width:1.5;"/><path d="M929.5,70.9531 C929.5,80.9531 947.5,80.9531 947.5,80.9531 C947.5,80.9531 965.5,80.9531 965.5,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138" x="875.5" y="852.6436">Product Service Db</text><path d="M929.5,865.9453 C929.5,855.9453 947.5,855.9453 947.5,855.9453 C947.5,855.9453 965.5,855.9453 965.5,865.9453 L965.5,891.9453 C965.5,901.9453 947.5,901.9453 947.5,901.9453 C947.5,901.9453 929.5,901.9453 929.5,891.9453 L929.5,865.9453 " fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" style="stroke:#000000;stroke-width:1.5;"/><path d="M929.5,865.9453 C929.5,875.9453 947.5,875.9453 947.5,875.9453 C947.5,875.9453 965.5,875.9453 965.5,865.9453 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="81" x="1029.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1036.5" y="107.9482">EventBus</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="81" x="1029.5" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="1036.5" y="859.6436">EventBus</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="111" x="1124.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="1131.5" y="107.9482">EventHandler</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="111" x="1124.5" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="1131.5" y="859.6436">EventHandler</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="1249.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1256.5" y="107.9482">Kafka</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="1249.5" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1256.5" y="859.6436">Kafka</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="131" x="1318.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1325.5" y="107.9482">Kafka Consumer</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="131" x="1318.5" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1325.5" y="859.6436">Kafka Consumer</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="193" x="1463.5" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="1470.5" y="107.9482">Tracking Activity Service</text><rect fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="193" x="1463.5" y="839.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="1470.5" y="859.6436">Tracking Activity Service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1670.5" y="119.9482">ActivityModel</text><ellipse cx="1723" cy="90.9531" fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1711" x2="1735" y1="104.9531" y2="104.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1670.5" y="852.6436">ActivityModel</text><ellipse cx="1723" cy="871.9453" fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1711" x2="1735" y1="885.9453" y2="885.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="1785.5" y="119.9482">Tracking activity Db</text><path d="M1843,70.9531 C1843,60.9531 1861,60.9531 1861,60.9531 C1861,60.9531 1879,60.9531 1879,70.9531 L1879,96.9531 C1879,106.9531 1861,106.9531 1861,106.9531 C1861,106.9531 1843,106.9531 1843,96.9531 L1843,70.9531 " fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1843,70.9531 C1843,80.9531 1861,80.9531 1861,80.9531 C1861,80.9531 1879,80.9531 1879,70.9531 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="1785.5" y="852.6436">Tracking activity Db</text><path d="M1843,865.9453 C1843,855.9453 1861,855.9453 1861,855.9453 C1861,855.9453 1879,855.9453 1879,865.9453 L1879,891.9453 C1879,901.9453 1861,901.9453 1861,901.9453 C1861,901.9453 1843,901.9453 1843,891.9453 L1843,865.9453 " fill="#FEFECE" filter="url(#f14pwoq2tjzc2p)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1843,865.9453 C1843,875.9453 1861,875.9453 1861,875.9453 C1861,875.9453 1879,875.9453 1879,865.9453 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#EEEEEE" filter="url(#f14pwoq2tjzc2p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1941.5" x="0" y="153.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1941.5" y1="153.8164" y2="153.8164"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1941.5" y1="156.8164" y2="156.8164"/><rect fill="#EEEEEE" filter="url(#f14pwoq2tjzc2p)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="182" x="879.75" y="143.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163" x="885.75" y="159.3169">Search/Filter Product</text><polygon fill="#A80036" points="361.5,193.5156,371.5,197.5156,361.5,201.5156,365.5,197.5156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="38.5" x2="367.5" y1="197.5156" y2="197.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="45.5" y="192.4497">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="58.5" y="192.4497">request data with conditions</text><polygon fill="#A80036" points="525.5,222.6484,535.5,226.6484,525.5,230.6484,529.5,226.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373.5" x2="531.5" y1="226.6484" y2="226.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="380.5" y="221.5825">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="393.5" y="221.5825">extract request info</text><polygon fill="#A80036" points="672.5,251.7813,682.5,255.7813,672.5,259.7813,676.5,255.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="537.5" x2="678.5" y1="255.7813" y2="255.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="544.5" y="250.7153">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="560.5" y="250.7153"/><polygon fill="#A80036" points="1060,280.9141,1070,284.9141,1060,288.9141,1064,284.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="684.5" x2="1066" y1="284.9141" y2="284.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="691.5" y="279.8481">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="704.5" y="279.8481">dispatch event</text><polygon fill="#A80036" points="1170,310.0469,1180,314.0469,1170,318.0469,1174,314.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1072" x2="1176" y1="314.0469" y2="314.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1079" y="308.981">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1096" y="308.981"/><polygon fill="#A80036" points="1267,339.1797,1277,343.1797,1267,347.1797,1271,343.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1182" x2="1273" y1="343.1797" y2="343.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1189" y="338.1138">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1206" y="338.1138"/><polygon fill="#A80036" points="798.5,368.3125,808.5,372.3125,798.5,376.3125,802.5,372.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="684.5" x2="804.5" y1="372.3125" y2="372.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="691.5" y="367.2466">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="704.5" y="367.2466">build query</text><polygon fill="#A80036" points="935.5,397.4453,945.5,401.4453,935.5,405.4453,939.5,401.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="810.5" x2="941.5" y1="401.4453" y2="401.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="817.5" y="396.3794">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="830.5" y="396.3794">executes query</text><path d="M10,416.4453 L76,416.4453 L76,423.4453 L66,433.4453 L10,433.4453 L10,416.4453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="206.7344" style="stroke:#000000;stroke-width:2.0;" width="1019.5" x="10" y="416.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="429.5122">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114" x="91" y="428.6558">[successful case]</text><polygon fill="#A80036" points="695.5,450.7109,685.5,454.7109,695.5,458.7109,691.5,454.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="689.5" x2="946.5" y1="454.7109" y2="454.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="701.5" y="449.645">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="714.5" y="449.645">query data</text><polygon fill="#A80036" points="548.5,479.8438,538.5,483.8438,548.5,487.8438,544.5,483.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="542.5" x2="683.5" y1="483.8438" y2="483.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="554.5" y="478.7778">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="581.5" y="478.7778"/><polygon fill="#A80036" points="384.5,508.9766,374.5,512.9766,384.5,516.9766,380.5,512.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="378.5" x2="536.5" y1="512.9766" y2="512.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="390.5" y="507.9106">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="416.5" y="507.9106"/><polygon fill="#A80036" points="49.5,538.1094,39.5,542.1094,49.5,546.1094,45.5,542.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43.5" x2="372.5" y1="542.1094" y2="542.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="55.5" y="537.0435">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289" x="77.5" y="537.0435">status = 200 + data matches with conditions</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1029.5" y1="551.1094" y2="551.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="15" y="561.3198">[error case]</text><polygon fill="#A80036" points="384.5,582.0469,374.5,586.0469,384.5,590.0469,380.5,586.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="378.5" x2="536.5" y1="586.0469" y2="586.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="390.5" y="580.981">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="411.5" y="580.981">return error</text><polygon fill="#A80036" points="49.5,611.1797,39.5,615.1797,49.5,619.1797,45.5,615.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="43.5" x2="372.5" y1="615.1797" y2="615.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="55.5" y="610.1138">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="77.5" y="610.1138">status = 500 + error message</text><rect fill="#EEEEEE" filter="url(#f14pwoq2tjzc2p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1941.5" x="0" y="650.7461"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1941.5" y1="650.7461" y2="650.7461"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1941.5" y1="653.7461" y2="653.7461"/><rect fill="#EEEEEE" filter="url(#f14pwoq2tjzc2p)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="160" x="890.75" y="640.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141" x="896.75" y="656.2466">Tracking activities</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68" x="915.75" y="697.5229">some delay</text><polygon fill="#A80036" points="1374,731.25,1384,735.25,1374,739.25,1378,735.25" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1279" x2="1380" y1="735.25" y2="735.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1286" y="730.1841">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1312" y="730.1841"/><polygon fill="#A80036" points="1550,760.3828,1560,764.3828,1550,768.3828,1554,764.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1386" x2="1556" y1="764.3828" y2="764.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1393" y="759.3169">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1419" y="759.3169"/><polygon fill="#A80036" points="1711,789.5156,1721,793.5156,1711,797.5156,1715,793.5156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1562" x2="1717" y1="793.5156" y2="793.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1569" y="788.4497">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1595" y="788.4497"/><polygon fill="#A80036" points="1849,818.6484,1859,822.6484,1849,826.6484,1853,822.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1723" x2="1855" y1="822.6484" y2="822.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1730" y="817.5825">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="1756" y="817.5825"/><!--MD5=[83bc40aceec34360b2effd82e887acab]
@startuml
autonumber

actor User

title Get products and track search/filter activities

box "Product Service" #LightBlue

participant "Middleware(s)" as Middleware
participant "ProductController" as Controller
participant "ProductService" as Service
entity "ProductModel" as Model
database "Product Service Db" as PDB
participant "EventBus" as EventBus
participant "EventHandler" as EventHandler
== Search/Filter Product ==
User -> Middleware: request data with conditions
Middleware -> Controller: extract request info
Controller -> Service
Service -> EventBus : dispatch event
EventBus -> EventHandler
EventHandler -> Kafka
Service -> Model: build query
Model -> PDB: executes query
alt successful case
PDB - -> Service : query data
Service - -> Controller
Controller - -> Middleware
Middleware - -> User: status = 200 + data matches with conditions
else error case
Controller - -> Middleware: return error
Middleware - -> User: status = 500 + error message
end 
end box
  
participant "Kafka" as Kafka

box "Tracking Activity Service"

participant "Kafka Consumer" as KafkaConsumer
participant "Tracking Activity Service" as TActivityService
entity "ActivityModel" as AModel
database "Tracking activity Db" as TDB
== Tracking activities ==
... some delay ...
Kafka -> KafkaConsumer
KafkaConsumer -> TActivityService
TActivityService -> AModel
AModel -> TDB

end box
@enduml

PlantUML version 1.2022.2beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>